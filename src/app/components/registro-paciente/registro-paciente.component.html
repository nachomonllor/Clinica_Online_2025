<!-- Selector de idioma -->
<div class="language-switch" style="text-align:right; margin-bottom:1rem;">
  <button mat-button (click)="switchLang('es')">ES</button>
  <button mat-button (click)="switchLang('en')">EN</button>
  <button mat-button (click)="switchLang('pt')">PT</button>
</div>

<mat-card class="registro-container">
  <!-- Título traducido -->
  <mat-card-title>
    {{ 'REGISTER.TITLE' | translate }}
  </mat-card-title>

  <form [formGroup]="registroPacienteForm" (ngSubmit)="onSubmit()">
    <!-- Nombre -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>{{ 'REGISTER.FIRST_NAME' | translate }}</mat-label>
      <input
        matInput
        formControlName="nombre"
        [placeholder]="'REGISTER.FIRST_NAME_PLACEHOLDER' | translate"
      />
      <mat-error *ngIf="registroPacienteForm.get('nombre')?.hasError('required')">
        {{ 'REGISTER.ERROR.FIRST_NAME_REQUIRED' | translate }}
      </mat-error>
    </mat-form-field>

    <!-- Apellido -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>{{ 'REGISTER.LAST_NAME' | translate }}</mat-label>
      <input
        matInput
        formControlName="apellido"
        [placeholder]="'REGISTER.LAST_NAME_PLACEHOLDER' | translate"
      />
      <mat-error *ngIf="registroPacienteForm.get('apellido')?.hasError('required')">
        {{ 'REGISTER.ERROR.LAST_NAME_REQUIRED' | translate }}
      </mat-error>
    </mat-form-field>

    <!-- Edad -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>{{ 'REGISTER.AGE' | translate }}</mat-label>
      <input
        matInput type="number"
        formControlName="edad"
        [placeholder]="'REGISTER.AGE_PLACEHOLDER' | translate"
      />
      <mat-error *ngIf="registroPacienteForm.get('edad')?.hasError('required')">
        {{ 'REGISTER.ERROR.AGE_REQUIRED' | translate }}
      </mat-error>
      <mat-error *ngIf="registroPacienteForm.get('edad')?.hasError('min')">
        {{ 'REGISTER.ERROR.AGE_MIN' | translate }}
      </mat-error>
    </mat-form-field>

    <!-- DNI -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>{{ 'REGISTER.DNI' | translate }}</mat-label>
      <input
        matInput
        formControlName="dni"
        [placeholder]="'REGISTER.DNI_PLACEHOLDER' | translate"
      />
      <mat-error *ngIf="registroPacienteForm.get('dni')?.hasError('required')">
        {{ 'REGISTER.ERROR.DNI_REQUIRED' | translate }}
      </mat-error>
    </mat-form-field>

    <!-- Obra Social -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>{{ 'REGISTER.INSURANCE' | translate }}</mat-label>
      <input
        matInput
        formControlName="obraSocial"
        [placeholder]="'REGISTER.INSURANCE_PLACEHOLDER' | translate"
      />
      <mat-error *ngIf="registroPacienteForm.get('obraSocial')?.hasError('required')">
        {{ 'REGISTER.ERROR.INSURANCE_REQUIRED' | translate }}
      </mat-error>
    </mat-form-field>

    <!-- Correo -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>{{ 'REGISTER.EMAIL' | translate }}</mat-label>
      <input
        matInput type="email"
        formControlName="email"
        [placeholder]="'REGISTER.EMAIL_PLACEHOLDER' | translate"
      />
      <mat-error *ngIf="registroPacienteForm.get('email')?.hasError('required')">
        {{ 'REGISTER.ERROR.EMAIL_REQUIRED' | translate }}
      </mat-error>
      <mat-error *ngIf="registroPacienteForm.get('email')?.hasError('email')">
        {{ 'REGISTER.ERROR.EMAIL_FORMAT' | translate }}
      </mat-error>
    </mat-form-field>

    <!-- Contraseña -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>{{ 'REGISTER.PASSWORD' | translate }}</mat-label>
      <input
        matInput type="password"
        formControlName="password"
        [placeholder]="'REGISTER.PASSWORD_PLACEHOLDER' | translate"
      />
      <mat-error *ngIf="registroPacienteForm.get('password')?.hasError('required')">
        {{ 'REGISTER.ERROR.PASSWORD_REQUIRED' | translate }}
      </mat-error>
    </mat-form-field>

    <!-- Imágenes -->
    <div class="full-width file-group">
      <button mat-raised-button color="primary" type="button" (click)="fileInput1.click()">
        {{ 'REGISTER.SELECT_IMAGE1' | translate }}
      </button>
      <input #fileInput1 type="file" hidden (change)="onFileChange($event, 1)" accept="image/*" />
      <div class="preview" *ngIf="imagenPrevia1">
        <img [src]="imagenPrevia1" alt="Previsualización 1" />
      </div>
    </div>

    <div class="full-width file-group">
      <button mat-raised-button color="primary" type="button" (click)="fileInput2.click()">
        {{ 'REGISTER.SELECT_IMAGE2' | translate }}
      </button>
      <input #fileInput2 type="file" hidden (change)="onFileChange($event, 2)" accept="image/*" />
      <div class="preview" *ngIf="imagenPrevia2">
        <img [src]="imagenPrevia2" alt="Previsualización 2" />
      </div>
    </div>

    <!-- Botón Registrar -->
    <button
      mat-raised-button
      color="accent"
      class="full-width"
      [disabled]="registroPacienteForm.invalid"
      type="submit"
    >
      {{ 'REGISTER.SUBMIT' | translate }}
    </button>

    <div *ngIf="error" class="error">{{ error }}</div>

  </form>
</mat-card>



<!-- <mat-card class="registro-container">
  <mat-card-title>Registro de Paciente</mat-card-title>
  <form [formGroup]="registroPacienteForm" (ngSubmit)="onSubmit()">

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Nombre</mat-label>
      <input matInput formControlName="nombre" placeholder="Ingresa tu nombre" />
      <mat-error *ngIf="registroPacienteForm.get('nombre')?.hasError('required')">
        El nombre es obligatorio.
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Apellido</mat-label>
      <input matInput formControlName="apellido" placeholder="Ingresa tu apellido" />
      <mat-error *ngIf="registroPacienteForm.get('apellido')?.hasError('required')">
        El apellido es obligatorio.
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Edad</mat-label>
      <input matInput type="number" formControlName="edad" placeholder="Ingresa tu edad" />
      <mat-error *ngIf="registroPacienteForm.get('edad')?.hasError('required')">
        La edad es obligatoria.
      </mat-error>
      <mat-error *ngIf="registroPacienteForm.get('edad')?.hasError('min')">
        La edad debe ser ≥ 0.
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>DNI</mat-label>
      <input matInput formControlName="dni" placeholder="Ingresa tu DNI" />
      <mat-error *ngIf="registroPacienteForm.get('dni')?.hasError('required')">
        El DNI es obligatorio.
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Obra Social</mat-label>
      <input matInput formControlName="obraSocial" placeholder="Ingresa tu obra social" />
      <mat-error *ngIf="registroPacienteForm.get('obraSocial')?.hasError('required')">
        La obra social es obligatoria.
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Correo Electrónico</mat-label>
      <input matInput type="email" formControlName="email" placeholder="Ingresa tu correo" />
      <mat-error *ngIf="registroPacienteForm.get('email')?.hasError('required')">
        El correo es obligatorio.
      </mat-error>
      <mat-error *ngIf="registroPacienteForm.get('email')?.hasError('email')">
        Formato inválido.
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Contraseña</mat-label>
      <input matInput type="password" formControlName="password" placeholder="Ingresa tu contraseña" />
      <mat-error *ngIf="registroPacienteForm.get('password')?.hasError('required')">
        La contraseña es obligatoria.
      </mat-error>
    </mat-form-field>

    File inputs: no mat-form-field nativo, usamos botón
    <div class="full-width file-group">
      <button mat-raised-button color="primary" type="button" (click)="fileInput1.click()">
        Seleccionar Imagen 1
      </button>
      <input #fileInput1 type="file" hidden (change)="onFileChange($event, 1)" accept="image/*" />
      <div class="preview" *ngIf="imagenPrevia1">
        <img [src]="imagenPrevia1" alt="Previsualización 1" />
      </div>
    </div>

    <div class="full-width file-group">
      <button mat-raised-button color="primary" type="button" (click)="fileInput2.click()">
        Seleccionar Imagen 2
      </button>
      <input #fileInput2 type="file" hidden (change)="onFileChange($event, 2)" accept="image/*" />
      <div class="preview" *ngIf="imagenPrevia2">
        <img [src]="imagenPrevia2" alt="Previsualización 2" />
      </div>
    </div>

    <button mat-raised-button color="accent" class="full-width" [disabled]="registroPacienteForm.invalid" type="submit">
      Registrarse
    </button>
  </form>
</mat-card> -->





