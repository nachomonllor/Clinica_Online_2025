<!-- encuesta-atencion.component.html :contentReference[oaicite:1]{index=1} -->

<!-- Selector de idioma -->
<div class="language-switch" style="text-align:right; margin-bottom:1rem;">
  <button mat-button (click)="switchLang('es')">ES</button>
  <button mat-button (click)="switchLang('en')">EN</button>
  <button mat-button (click)="switchLang('pt')">PT</button>
</div>


<mat-card class="encuesta-card">
  <mat-card-header>
    <mat-card-title>{{ 'survey.title' | translate }}</mat-card-title>
  </mat-card-header>

  <mat-card-content [formGroup]="encuestaForm">
    <!-- 1. Cuadro de texto -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>{{ 'survey.commentLabel' | translate }}</mat-label>
      <textarea
        matInput
        formControlName="comentario"
        rows="3"
        [placeholder]="'survey.commentPlaceholder' | translate"
      ></textarea>
      <mat-error *ngIf="encuestaForm.get('comentario')?.hasError('required')">
        {{ 'survey.commentRequired' | translate }}
      </mat-error>
    </mat-form-field>

    <!-- 2. Estrellas para calificar -->
    <div class="rating-group">
      <label class="group-label">{{ 'survey.ratingLabel' | translate }}</label>
      <ng-container *ngFor="let star of starIcons">
        <button mat-icon-button type="button" (click)="setRating(star)">
          <mat-icon>
            {{
              encuestaForm.get('calificacion')?.value >= star
                ? 'star'
                : 'star_border'
            }}
          </mat-icon>
        </button>
      </ng-container>
      <mat-error *ngIf="encuestaForm.get('calificacion')?.hasError('required')">
        {{ 'survey.ratingRequired' | translate }}
      </mat-error>
    </div>

    <!-- 3. Radio button -->
    <div class="full-width">
      <label class="group-label">{{ 'survey.recommendLabel' | translate }}</label>
      <mat-radio-group formControlName="opcion">
        <mat-radio-button value="si">{{ 'survey.yes' | translate }}</mat-radio-button>
        <mat-radio-button value="no">{{ 'survey.no' | translate }}</mat-radio-button>
      </mat-radio-group>
      <mat-error *ngIf="encuestaForm.get('opcion')?.hasError('required')">
        {{ 'survey.optionRequired' | translate }}
      </mat-error>
    </div>

    <!-- 4. Checkboxes -->
    <div formGroupName="aspectos" class="full-width">
      <label class="group-label">{{ 'survey.aspectsLabel' | translate }}</label>
      <mat-checkbox formControlName="puntualidad">
        {{ 'survey.punctuality' | translate }}
      </mat-checkbox>
      <mat-checkbox formControlName="amabilidad">
        {{ 'survey.kindness' | translate }}
      </mat-checkbox>
      <mat-checkbox formControlName="limpieza">
        {{ 'survey.cleanliness' | translate }}
      </mat-checkbox>
      <mat-checkbox formControlName="explicacion">
        {{ 'survey.explanation' | translate }}
      </mat-checkbox>
    </div>

    <!-- 5. Control de rango -->
    <div class="full-width range-group">
      <label class="group-label">{{ 'survey.rangeLabel' | translate }}</label>
      <mat-slider
        [min]="1"
        [max]="10"
        [step]="1"
        thumbLabel
        tickInterval="1"
      >
        <input matSliderThumb formControlName="rango" />
      </mat-slider>
      <span class="slider-value">
        {{ encuestaForm.get('rango')?.value }}
      </span>
    </div>
  </mat-card-content>

  <mat-card-actions align="end">
    <button mat-raised-button color="primary">
      {{ 'survey.submit' | translate }}
    </button>
  </mat-card-actions>
</mat-card>





<!-- <mat-card class="encuesta-card">
    <mat-card-header>
        <mat-card-title>Encuesta de Atención</mat-card-title>
    </mat-card-header>

    <mat-card-content [formGroup]="encuestaForm">
        Cuadro de texto 
        <mat-form-field appearance="outline" class="full-width">
            <mat-label>Comentario</mat-label>
            <textarea matInput formControlName="comentario" rows="3" placeholder="Escribe tu comentario"></textarea>
            <mat-error *ngIf="encuestaForm.get('comentario')?.hasError('required')">
                El comentario es obligatorio
            </mat-error>
        </mat-form-field>

        Estrellas para calificar
        <div class="rating-group">
            <label class="group-label">Tu calificación:</label>
            <ng-container *ngFor="let star of starIcons">
                <button mat-icon-button type="button" (click)="setRating(star)">
                    <mat-icon>
                        {{ encuestaForm.get('calificacion')?.value >= star
                        ? 'star'
                        : 'star_border' }}
                    </mat-icon>
                </button>
            </ng-container>
            <mat-error *ngIf="encuestaForm.get('calificacion')?.hasError('required')">
                Selecciona una calificación
            </mat-error>
        </div>

        Radio button 
        <div class="full-width">
            <label class="group-label">¿Recomiendas al profesional?</label>
            <mat-radio-group formControlName="opcion">
                <mat-radio-button value="si">Sí</mat-radio-button>
                <mat-radio-button value="no">No</mat-radio-button>
            </mat-radio-group>
            <mat-error *ngIf="encuestaForm.get('opcion')?.hasError('required')">
                Elige una opción
            </mat-error>
        </div>

        Checkboxes 
        <div formGroupName="aspectos" class="full-width">
            <label class="group-label">¿Qué aspectos destacas?</label>
            <mat-checkbox formControlName="puntualidad">Puntualidad</mat-checkbox>
            <mat-checkbox formControlName="amabilidad">Amabilidad</mat-checkbox>
            <mat-checkbox formControlName="limpieza">Limpieza</mat-checkbox>
            <mat-checkbox formControlName="explicacion">Explicación</mat-checkbox>
        </div>

        <div class="full-width range-group">
            <label class="group-label">Califica del 1 al 10:</label>
            <mat-slider [min]="1" [max]="10" [step]="1" thumbLabel tickInterval="1">
                <input matSliderThumb formControlName="rango" />
            </mat-slider>
            <span class="slider-value">
                {{ encuestaForm.get('rango')?.value }}
            </span>
        </div>
    </mat-card-content>
    <mat-card-actions align="end">
        <button mat-raised-button color="primary" (click)="onSubmit()">
            Enviar
        </button>
    </mat-card-actions>

</mat-card> -->